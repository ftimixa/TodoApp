{"ast":null,"code":"import { USERS_LOADED, USERS_ERROR, TASKS_LOADED, TASKS_ERROR, TASKS_REQUESTED } from '../../constants';\nimport { usersLoaded, tasksLoaded, usersError } from '../actions/actionCreator';\nconst initialStateUsers = {\n  users: [],\n  error: null\n};\nexport const usersReducer = (state = initialStateUsers, {\n  type,\n  users,\n  error\n}) => {\n  switch (type) {\n    case USERS_LOADED:\n      return {\n        users,\n        error: null\n      };\n\n    case USERS_ERROR:\n      return {\n        users: [],\n        error: error\n      };\n\n    default:\n      return state;\n  }\n};\nconst initialStateTasks = {\n  users: [],\n  loaded: true,\n  error: null\n};\nexport const tasksReducer = (state = initialStateTasks, {\n  type,\n  tasks,\n  error\n}) => {\n  switch (type) {\n    case TASKS_REQUESTED:\n      return {\n        tasks: [],\n        loaded: true,\n        error: null\n      };\n\n    case TASKS_LOADED:\n      return {\n        tasks,\n        loaded: false,\n        error: null\n      };\n\n    case TASKS_ERROR:\n      return {\n        tasks: [],\n        loaded: false,\n        error\n      };\n\n    default:\n      return state;\n  }\n};\nexport const loadUsers = () => async dispatch => {\n  await fetch(\"/api/users\").then(res => res.json()).then(users => dispatch(usersLoaded(users))).catch(err => dispatch(usersError(err)));\n};\nexport const loadTasks = () => async dispatch => {\n  await fetch(\"/api/tasks\").then(res => res.json()).then(dispatch(tasksLoaded(tasks)));\n};\nexport const saveTask = task => async dispatch => {\n  await fetch(\"/api/tasks\", {\n    method: \"POST\",\n    headers: {\n      'Accept': 'application/json',\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify(task)\n  }).then(res => res.json()).then(tasks => dispatch(tasksLoaded(tasks)));\n};\nexport const changePriority = (id, nameAction) => async dispatch => {\n  await fetch(`/api/tasks/${id}`, {\n    method: \"PUT\",\n    headers: {\n      'Accept': 'application/json',\n      'Content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      nameAction\n    })\n  }).then(res => res.json()).then(tasks => dispatch(tasksLoaded(tasks)));\n};\nexport const removeTask = id => async dispatch => {\n  await fetch(`/api/tasks/${id}`, {\n    method: \"DELETE\"\n  }).then(res => res.json()).then(tasks => dispatch(tasksLoaded(tasks)));\n};","map":{"version":3,"sources":["C:/Users/Grechka_Mi/Documents/react-express-example-master/frontend/src/TodoApp/reducers/reducers.js"],"names":["USERS_LOADED","USERS_ERROR","TASKS_LOADED","TASKS_ERROR","TASKS_REQUESTED","usersLoaded","tasksLoaded","usersError","initialStateUsers","users","error","usersReducer","state","type","initialStateTasks","loaded","tasksReducer","tasks","loadUsers","dispatch","fetch","then","res","json","catch","err","loadTasks","saveTask","task","method","headers","body","JSON","stringify","changePriority","id","nameAction","removeTask"],"mappings":"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","sourcesContent":["import {USERS_LOADED, USERS_ERROR, TASKS_LOADED, TASKS_ERROR, TASKS_REQUESTED } from '../../constants';\r\nimport {usersLoaded, tasksLoaded, usersError} from '../actions/actionCreator';\r\n\r\nconst initialStateUsers = {\r\n  users: [],\r\n  error: null\r\n}\r\n\r\nexport const usersReducer = (state = initialStateUsers, {type, users, error}) => {\r\n  switch (type) {\r\n    case USERS_LOADED:\r\n      return {\r\n        users,\r\n        error: null,\r\n      }\r\n    case USERS_ERROR:\r\n      return {\r\n        users: [],\r\n        error: error,\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst initialStateTasks = {\r\n  users: [],\r\n  loaded: true,\r\n  error: null\r\n}\r\n\r\nexport const tasksReducer = (state = initialStateTasks, { type, tasks, error }) => {\r\n  switch (type) {\r\n    case TASKS_REQUESTED:\r\n      return {\r\n        tasks: [],\r\n        loaded: true,\r\n        error: null,\r\n      }\r\n    case TASKS_LOADED:\r\n      return {\r\n        tasks,\r\n        loaded: false,\r\n        error: null,\r\n      }\r\n    case TASKS_ERROR:\r\n      return {\r\n        tasks: [],\r\n        loaded: false,\r\n        error,\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const loadUsers = () => async (dispatch) => {\r\n  await fetch(\"/api/users\")\r\n  .then(res => res.json())\r\n  .then(users => dispatch(usersLoaded(users)))\r\n  .catch(err => dispatch(usersError(err)))\r\n}\r\n\r\nexport const loadTasks = () => async (dispatch) => {\r\n  await fetch(\"/api/tasks\")\r\n  .then(res => res.json())\r\n  .then(dispatch(tasksLoaded(tasks)))\r\n}\r\n\r\nexport const saveTask = (task) => async (dispatch) => {\r\n  await fetch(\"/api/tasks\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify(task)\r\n  })\r\n  .then(res => res.json())\r\n  .then(tasks => dispatch(tasksLoaded(tasks)))\r\n}\r\n\r\nexport const changePriority = (id, nameAction) => async (dispatch) => {\r\n  await fetch(`/api/tasks/${id}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-type': 'application/json'\r\n    },\r\n    body: JSON.stringify({nameAction})\r\n  })\r\n  .then(res => res.json())\r\n  .then(tasks => dispatch(tasksLoaded(tasks)))\r\n}\r\n\r\nexport const removeTask = (id) => async (dispatch) => {\r\n  await fetch(`/api/tasks/${id}`, {\r\n    method: \"DELETE\",\r\n  })\r\n  .then(res => res.json())\r\n  .then(tasks => dispatch(tasksLoaded(tasks)))\r\n}\r\n"]},"metadata":{},"sourceType":"module"}